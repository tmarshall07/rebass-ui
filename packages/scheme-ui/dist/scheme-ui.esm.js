import{__assign as e,__awaiter as t,__generator as r,__rest as n}from"tslib";import o,{useEffect as a,forwardRef as i,useRef as c,useState as l,useContext as u}from"react";import{Box as s,Flex as d,Text as f,Button as m}from"rebass/styled-components";import{Input as v,Switch as h}from"@rebass/forms/styled-components";import{ThemeProvider as g}from"styled-components";import{darken as p,transparentize as b}from"polished";var x=function(){function e(e,t){void 0===e&&(e=null),void 0===t&&(t=500),this.value=e,this.delay=t,this.timeout=null}return e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(e,t){var r=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){r.value=e,t(e)}),this.delay)},e}(),y=function(e,t){var r=function(r){e.current&&!e.current.contains(r.target)&&t(r)};a((function(){return document.addEventListener("click",r),function(){document.removeEventListener("click",r)}}))},k=i((function(t,r){return o.createElement(s,e({color:"text"},t,{ref:r}))}));k.displayName="Box";var E=i((function(t,r){return o.createElement(d,e({color:"text"},t,{ref:r}))}));E.displayName="Flex";var w,S=function(t){return o.createElement(v,e({},t,{sx:e({borderRadius:3,borderColor:"transparent",bg:"gray5",p:"0.9em",color:"gray80"},t.sx||{})}))},C=function(t){var r=t.value,n=t.placeholder,i=t.items,u=void 0===i?[]:i,s=t.menuProps,d=void 0===s?{}:s,f=t.inputProps,m=void 0===f?{}:f,v=t.onChange,h=t.onSelect,g=t.keyExtractor,p=t.renderItem,b=c(),x=l(!1),E=x[0],w=x[1],C=l(0),I=C[0],T=C[1];a((function(){!function(e,t){var r=e;if(null==r?void 0:r.children){var n=r.children[t];if(n){var o=n.offsetTop,a=r.scrollTop,i=r.offsetHeight,c=n.offsetHeight;if(o+c>i+a){var l=o+c-i;r.scrollTo(0,l)}else o<a&&r.scrollTo(0,o)}}}(b.current,I)}),[I]);var z=c();y(z,(function(){return w(!1)}));var F=function(e){w(!1),h(e)};return o.createElement(k,{sx:{position:"relative"},ref:z},o.createElement(S,e({placeholder:n,value:r,onChange:v,onFocus:function(e){var t;w(!0),null===(t=m.onFocus)||void 0===t||t.call(m,e)},onKeyDown:function(e){var t=I;switch(e.key){case"ArrowUp":e.preventDefault(),I-1<0||(t-=1);break;case"ArrowDown":e.preventDefault(),I+1>=u.length||(t+=1);break;case"Enter":e.preventDefault(),F(u[I])}T(t)}},m)),E&&!!u.length&&o.createElement(k,e({ref:b},d,{sx:e({position:"absolute",bg:"bg-2",maxHeight:300,width:"100%",overflow:"auto",zIndex:2,marginTop:1,borderRadius:5,boxShadow:"large",borderStyle:"solid",borderColor:"gray5",borderWidth:1},(null==d?void 0:d.sx)||{})}),u.map((function(e,t){return o.createElement(k,{onClick:function(){return F(e)},key:g(e)},p(e,t===I))}))))},I={color:"gray90"},T=function(t){return o.createElement(f,e({as:"p"},I,t))};!function(e){e.mode="settings:dark:mode",e.value="settings:dark:value"}(w||(w={}));var z=o.createContext({colors:null,scheme:"light"}),F=function(){return u(z)};function D(){return F().colors}var P={text:"#282C30",gray5:p(.05,"#F8F8F8")},R={s:{px:"0.65em",py:"0.5em",fontSize:"14px"}},L=function(e){return{bg:"transparent",color:e,border:"1px solid ".concat(b(.75,e)),":hover":{bg:b(.95,e||"black")},":active":{bg:b(.92,e||"black")}}},W=function(e){return{bg:"transparent",boxShadow:"none",color:e,":hover":{bg:b(.9,e||"black")},":active":{bg:b(.85,e||"black")}}},A=function(t,r){var n={opacity:.5,cursor:"initial",bg:r};return t?e(e({},n),{":focus,:active,:hover":e({},n)}):{}};function B(t){var r=t.children,n=t.color,a=void 0===n?"text":n,i=t.bgProp,c=void 0===i?"gray5":i,l=t.sx,u=t.startIcon,s=t.variant,f=t.size,v=t.onClick,h=t.endIcon,g=t.enabled,b=void 0===g||g,x=D()||P,y=x[a]||a,k=x[c]||c;return o.createElement(m,e({},t,{sx:e(e(e(e(e({display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontWeight:"bold",color:y,bg:k,":focus":{outline:"none"},":hover":{bg:p(.05,k)},":active":{bg:p(.1,k)}},f&&R[f]?R[f]:{}),"outline"===s&&y?L(y):{}),"transparent"===s&&y?W(y):{}),A(!b,"outline"===s?"transparent":k)),l),disabled:!b,variant:s,onClick:v}),u&&o.createElement(d,{mr:2,alignItems:"center"},u),r,h&&o.createElement(d,{ml:2,alignItems:"center"},h))}function H(e,t){void 0===t&&(t=500);var r=l(e),n=r[0],o=r[1],i=c(new x(e,t));return a((function(){i.current.setValue(e,(function(){o(e)}))}),[e,t]),n}var M=C,V=function(t){var r=t.onSelect,n=t.text,a=t.focused,i=t.sx,c=void 0===i?{}:i;return o.createElement(T,{p:2,sx:e(e({cursor:"pointer",":hover":{bg:"gray10"}},a?{bg:"gray10"}:{}),{sx:c}),onClick:r},n)},j=k,N=E,q=B,K=function(t){var r=t.boxShadow,n=void 0===r?"large":r;return o.createElement(k,e({p:[3,4],bg:"bg-0",color:"text"},t,{sx:e({boxShadow:n,borderRadius:10},t.sx||{})}))},O=function(n){var i=n.onSelect,c=n.request,u=n.formatResponse,s=n.debounce,d=void 0===s?500:s,f=l([]),m=f[0],v=f[1],h=H(n.value,d);return a((function(){var e;e=h,t(void 0,void 0,void 0,(function(){var t,n;return r(this,(function(r){switch(r.label){case 0:return[4,c(e)];case 1:return(t=r.sent())&&(n=u(t),v(n)),[2]}}))}))}),[h]),o.createElement(C,e({},n,{items:m,onSelect:i}))},U=function(t){var r=t.icon,a=t.sx,i=t.round,c=t.iconSize,l=void 0===c?24:c,u=t.onClick,s=n(t,["icon","sx","round","iconSize","onClick"]);return o.createElement(B,e({},s,{onClick:u,sx:e(e({fontSize:l,width:"1.75em",height:"1.75em",padding:0},i?{borderRadius:50}:{}),a)}),r)},G=S,J=function(t){var r=t.color,n=void 0===r?"primary":r,a=t.disabled,i=t.checked;return o.createElement(h,e({sx:{borderColor:i?n:"gray10",opacity:a?.5:1,"> div":{backgroundColor:"bg-0",borderColor:i?n:"gray20"},"&[aria-checked=false]":{bg:"gray5"},"&[aria-checked=true]":{bg:n}}},t))},Q=function(t){return o.createElement(f,e({},I,t))},X=T,Y=function(t){return o.createElement(f,e({as:"h1",fontWeight:700},I,t))},Z=function(t){return o.createElement(f,e({as:"h2"},I,t))},$=function(t){return o.createElement(f,e({as:"h3"},I,t))},_=function(t){return o.createElement(f,e({as:"h4"},I,t))},ee=function(t){return o.createElement(f,e({as:"a",fontSize:16,fontWeight:400},I,t))},te=x,re=y,ne=D,oe=H,ae=F,ie=function(n){var i=n.theme,c=void 0===i?{}:i,u=n.scheme,s=void 0===u?"":u,d=n.colorSchemes,f=void 0===d?{}:d,m=n.children,v=function(){var e=this,n=l("light"),o=n[0],i=n[1],c=l("light"),u=c[0],s=c[1],d=l(!0),f=d[0],m=d[1],v=function(){return t(e,void 0,void 0,(function(){var e,n,o;return r(this,(function(a){switch(a.label){case 0:return[4,t(void 0,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,Promise.all([localStorage.getItem(w.mode),localStorage.getItem(w.value)])];case 1:return[2,e.sent()]}}))}))];case 1:return e=a.sent(),n=e[0],o=e[1],"user"===n&&(o&&o!==u&&s(o),m(!1)),[2]}}))}))};return a((function(){var e=function(e){var t=e.matches?"dark":"light";i(t)};v(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e);var t=window.matchMedia("(prefers-color-scheme: dark)")?"dark":"light";return i(t),function(){window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",e)}}),[]),{scheme:f?o:u,userScheme:u,auto:f,setScheme:function(e){localStorage.setItem(w.value,e),s(e)},setAuto:function(e){e?localStorage.setItem(w.mode,"auto"):localStorage.setItem(w.mode,"user"),m(e)}}}(),h=f[s]||f[v.scheme]||f[Object.keys(f)[0]];return o.createElement(z.Provider,{value:e(e({},v),{colors:h})},o.createElement(g,{theme:e(e({},c),{colors:h})},m))};export{ee as A,M as Autocomplete,V as AutocompleteMenuItem,j as Box,q as Button,K as Card,te as Debouncer,O as FetchAutocomplete,N as Flex,Y as H1,Z as H2,$ as H3,_ as H4,U as IconButton,G as Input,X as P,ie as SchemeProvider,J as Switch,Q as Text,re as useClickOutside,ne as useColors,oe as useDebounce,ae as useSchemeContext};
