import{__assign as e,__awaiter as t,__generator as r,__rest as n}from"tslib";import o,{useEffect as a,forwardRef as i,useRef as c,useState as l,useContext as u}from"react";import{Box as s,Flex as d,Text as v,Button as f}from"rebass/styled-components";import{Input as m,Switch as h}from"@rebass/forms/styled-components";import{ThemeProvider as g}from"styled-components";import{darken as b,transparentize as p}from"polished";var x=function(){function e(e,t){void 0===e&&(e=null),void 0===t&&(t=500),this.value=e,this.delay=t,this.timeout=null}return e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(e,t){var r=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){r.value=e,t(e)}),this.delay)},e}(),y=function(e,t){var r=function(r){e.current&&!e.current.contains(r.target)&&t(r)};a((function(){return document.addEventListener("click",r),function(){document.removeEventListener("click",r)}}))},E=i((function(t,r){return o.createElement(s,e({color:"text"},t,{ref:r}))}));E.displayName="Box";var k=i((function(t,r){return o.createElement(d,e({color:"text"},t,{ref:r}))}));k.displayName="Flex";var w,S=function(t){return o.createElement(m,e({},t,{sx:e({borderRadius:3,borderColor:"transparent",bg:"gray5",p:"0.9em",color:"gray80"},t.sx||{})}))},C=function(t){var r=t.value,n=t.placeholder,i=t.items,u=void 0===i?[]:i,s=t.menuProps,d=void 0===s?{}:s,v=t.inputProps,f=void 0===v?{}:v,m=t.onChange,h=t.onSelect,g=t.keyExtractor,b=t.renderItem,p=c(),x=l(!1),k=x[0],w=x[1],C=l(0),I=C[0],T=C[1];a((function(){!function(e,t){var r=e;if(null==r?void 0:r.children){var n=r.children[t];if(n){var o=n.offsetTop,a=r.scrollTop,i=r.offsetHeight,c=n.offsetHeight;if(o+c>i+a){var l=o+c-i;r.scrollTo(0,l)}else o<a&&r.scrollTo(0,o)}}}(p.current,I)}),[I]);var F=c();y(F,(function(){return w(!1)}));var z=function(e){w(!1),h(e)};return o.createElement(E,{sx:{position:"relative"},ref:F},o.createElement(S,e({placeholder:n,value:r,onChange:m,onFocus:function(e){var t;w(!0),null===(t=f.onFocus)||void 0===t||t.call(f,e)},onKeyDown:function(e){var t=I;switch(e.key){case"ArrowUp":e.preventDefault(),I-1<0||(t-=1);break;case"ArrowDown":e.preventDefault(),I+1>=u.length||(t+=1);break;case"Enter":e.preventDefault(),z(u[I])}T(t)}},f)),k&&!!u.length&&o.createElement(E,e({ref:p},d,{sx:e({position:"absolute",bg:"bg-2",maxHeight:300,width:"100%",overflow:"auto",zIndex:2,marginTop:1,borderRadius:5,boxShadow:"large",borderStyle:"solid",borderColor:"gray5",borderWidth:1},(null==d?void 0:d.sx)||{})}),u.map((function(e,t){return o.createElement(E,{onClick:function(){return z(e)},key:g(e)},b(e,t===I))}))))},I={color:"gray90"},T=function(t){return o.createElement(v,e({as:"p"},I,t))};!function(e){e.mode="settings:dark:mode",e.value="settings:dark:value"}(w||(w={}));var F=o.createContext({colors:null,scheme:"light"}),z=function(){return u(F)};function D(){return z().colors}var R={text:"#282C30",gray5:b(.05,"#F8F8F8")},L=function(e){return{bg:"transparent",color:e,border:"1px solid ".concat(p(.75,e)),":hover":{bg:p(.95,e||"black")},":active":{bg:p(.92,e||"black")}}},P=function(e){return{bg:"transparent",boxShadow:"none",color:e,":hover":{bg:p(.95,e||"black")},":active":{bg:p(.92,e||"black")}}},W=function(t){var r={opacity:.5,cursor:"initial",bg:t};return e(e({},r),{":focus,:active,:hover":e({},r)})};function A(t){var r,n,a=t.color,i=void 0===a?"text":a,c=t.bg,l=void 0===c?"gray5":c,u=t.variants,s=void 0===u?{}:u,v=t.children,m=t.sx,h=t.startIcon,g=t.variant,p=t.endIcon,x=t.disabledSx,y=t.disabled,E=void 0!==y&&y,k=t.enabled,w=void 0===k||k,S=D()||R,C=S[i]||i,I=S[l]||l,T=e({outline:L,transparent:P},s),F=!w||E,z=x||W;return o.createElement(f,e({disabled:F,variant:g,px:"1em",py:"0.5em"},t,{sx:e(e(e(e({display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontWeight:"bold",color:C,bg:I},m),{":focus":e({outline:"none"},(null==m?void 0:m[":focus"])||{}),":hover":e({bg:b(.05,I)},(null==m?void 0:m[":hover"])||{}),":active":e({bg:b(.1,I)},(null==m?void 0:m[":active"])||{})}),F?z(I):{}),null!==(n=null===(r=T[g])||void 0===r?void 0:r.call(T,C))&&void 0!==n?n:{})}),h&&o.createElement(d,{mr:2,alignItems:"center"},h),v,p&&o.createElement(d,{ml:2,alignItems:"center"},p))}function B(e,t){void 0===t&&(t=500);var r=l(e),n=r[0],o=r[1],i=c(new x(e,t));return a((function(){i.current.setValue(e,(function(){o(e)}))}),[e,t]),n}var H=C,M=function(t){var r=t.onSelect,n=t.text,a=t.focused,i=t.sx,c=void 0===i?{}:i;return o.createElement(T,{p:2,sx:e(e({cursor:"pointer",":hover":{bg:"gray10"}},a?{bg:"gray10"}:{}),{sx:c}),onClick:r},n)},V=E,j=k,N=A,q=function(t){var r=t.boxShadow,n=void 0===r?"large":r;return o.createElement(E,e({p:[3,4],bg:"bg-0",color:"text"},t,{sx:e({boxShadow:n,borderRadius:10},t.sx||{})}))},K=function(n){var i=n.onSelect,c=n.request,u=n.formatResponse,s=n.debounce,d=void 0===s?500:s,v=l([]),f=v[0],m=v[1],h=B(n.value,d);return a((function(){var e;e=h,t(void 0,void 0,void 0,(function(){var t,n;return r(this,(function(r){switch(r.label){case 0:return[4,c(e)];case 1:return(t=r.sent())&&(n=u(t),m(n)),[2]}}))}))}),[h]),o.createElement(C,e({},n,{items:f,onSelect:i}))},O=function(t){var r=t.icon,a=t.sx,i=t.round,c=t.iconSize,l=void 0===c?24:c,u=t.onClick,s=n(t,["icon","sx","round","iconSize","onClick"]);return o.createElement(A,e({},s,{onClick:u,sx:e(e({fontSize:l,width:"1.75em",height:"1.75em",padding:0},i?{borderRadius:50}:{}),a)}),r)},U=S,G=function(t){var r=t.color,n=void 0===r?"primary":r,a=t.disabled,i=t.checked;return o.createElement(h,e({sx:{borderColor:i?n:"gray10",opacity:a?.5:1,"> div":{backgroundColor:"bg-0",borderColor:i?n:"gray20"},"&[aria-checked=false]":{bg:"gray5"},"&[aria-checked=true]":{bg:n}}},t))},J=function(t){return o.createElement(v,e({},I,t))},Q=T,X=function(t){return o.createElement(v,e({as:"h1",fontWeight:700},I,t))},Y=function(t){return o.createElement(v,e({as:"h2"},I,t))},Z=function(t){return o.createElement(v,e({as:"h3"},I,t))},$=function(t){return o.createElement(v,e({as:"h4"},I,t))},_=function(t){return o.createElement(v,e({as:"a",fontSize:16,fontWeight:400},I,t))},ee=x,te=y,re=D,ne=B,oe=z,ae=function(n){var i=n.theme,c=void 0===i?{}:i,u=n.scheme,s=void 0===u?"":u,d=n.colorSchemes,v=void 0===d?{}:d,f=n.children,m=function(){var e=this,n=l("light"),o=n[0],i=n[1],c=l("light"),u=c[0],s=c[1],d=l(!0),v=d[0],f=d[1],m=function(){return t(e,void 0,void 0,(function(){var e,n,o;return r(this,(function(a){switch(a.label){case 0:return[4,t(void 0,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,Promise.all([localStorage.getItem(w.mode),localStorage.getItem(w.value)])];case 1:return[2,e.sent()]}}))}))];case 1:return e=a.sent(),n=e[0],o=e[1],"user"===n&&(o&&o!==u&&s(o),f(!1)),[2]}}))}))};return a((function(){var e=function(e){var t=e.matches?"dark":"light";i(t)};m(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e);var t=window.matchMedia("(prefers-color-scheme: dark)")?"dark":"light";return i(t),function(){window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",e)}}),[]),{scheme:v?o:u,userScheme:u,auto:v,setScheme:function(e){localStorage.setItem(w.value,e),s(e)},setAuto:function(e){e?localStorage.setItem(w.mode,"auto"):localStorage.setItem(w.mode,"user"),f(e)}}}(),h=v[s]||v[m.scheme]||v[Object.keys(v)[0]];return o.createElement(F.Provider,{value:e(e({},m),{colors:h})},o.createElement(g,{theme:e(e({},c),{colors:h})},f))};export{_ as A,H as Autocomplete,M as AutocompleteMenuItem,V as Box,N as Button,q as Card,ee as Debouncer,K as FetchAutocomplete,j as Flex,X as H1,Y as H2,Z as H3,$ as H4,O as IconButton,U as Input,Q as P,ae as SchemeProvider,G as Switch,J as Text,te as useClickOutside,re as useColors,ne as useDebounce,oe as useSchemeContext};
//# sourceMappingURL=bundle.esm.min.js.map
